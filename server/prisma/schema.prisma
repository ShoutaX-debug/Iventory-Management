// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client"
}

datasource db {
  provider = "sqlite"
}

model User {
  id        Int      @id @default(autoincrement())
  username  String   @unique
  password  String
  fullName  String
  role      String   @default("EMPLOYEE") // 'ADMIN' or 'EMPLOYEE'
  division  String?
  createdAt DateTime @default(now())

  logs      StockLog[]
}

model Item {
  id            Int      @id @default(autoincrement())
  code          String   @unique
  name          String
  category      String
  unit          String
  stock         Int      @default(0)
  minStockAlert Int      @default(10)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  logs          StockLog[]
}

model StockLog {
  id          Int      @id @default(autoincrement())
  itemId      Int
  userId      Int
  type        String   // 'IN' or 'OUT'
  quantity    Int
  description String?
  date        DateTime @default(now())

  item        Item     @relation(fields: [itemId], references: [id])
  user        User     @relation(fields: [userId], references: [id])
}
